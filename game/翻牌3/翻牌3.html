<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Game 3</title>
    <style>
        * {
            box-sizing: border-box;

        }

        html {

            min-width: 100vm;
            min-height: 100vh;
        }

        body {
            margin: 0;
            background: radial-gradient(#5fc5f1, #3b708f);
        }

        .game-title  h1{
            height: 100px;
            color: bisque;
            text-align: center;
            font-size: 4em;
            font-weight: normal;
        }

        .game-title.return {
            top:10px;
            left:10px;

        }

        .game-container {

            display: grid;
            grid-template-columns: repeat(8, auto);
            justify-content: center;
            gap: 10px;
            perspective: 500px;
        }

        .game-info-container {
            grid-column: 1/-1;
            display: flex;
            justify-content: space-between;


        }

        .game-info {
            color: rgb(145, 24, 24);
            font-size: 3em;

        }

        .card {
            position: relative;
            height: 175px;
            width: 125px;
        }

        .container {
            position: relative;
            height: 175px;
            width: 125px;
        }



        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-radius: 12px;
            border-width: 1px;
            border-style: soild;
            font-size: 7em;
            backface-visibility: hidden;
        }

          /* 设置图片的高度和宽度 */
        .card-face img {
          height: 175px;             /* 固定图片高度为 400px */
          width: auto;               /* 宽度自动调整，保持比例 */
          object-fit: cover;         /* 保持图片的比例，同时裁剪溢出的部分 */
        }

        .card.back {
            background-color: black;
            border-color: red;
            transform: rotateY(0deg);
        }

        .card-front {

            border-color: black;
            transform: rotateY(180deg);
        }

        .wenwu {
            position: absolute;
            width: 100%;
            height: 100%;

        }
    </style>

    <link rel="stylesheet" href="/game/game_base.css">  
</head>

<body>
    <div class="header">  
        <div class="lan">
            <a href="/h5web/index.html">
                <svg fill="#000000" width="800px" height="800px" viewBox="0 0 64 64" id="Layer_1_1_" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g/><path d="M22.727,21.9c-0.724-0.725-1.728-1.124-2.753-1.068c-1.024,0.046-1.99,0.525-2.646,1.313l-0.479,0.575  c-1.13,1.357-1.13,3.328,0,4.686c0,0,0,0,0.001,0.001l0.479,0.574c0.657,0.788,1.622,1.267,2.646,1.313  c1.026,0.051,2.029-0.343,2.753-1.068l1.748-1.748l2.349,2.348l-1.927,1.927c-1.428,1.427-1.428,3.75,0,5.177  c0.714,0.714,1.65,1.071,2.589,1.07c0.937,0,1.874-0.356,2.588-1.07L31,35.001V37h-1c-0.553,0-1,0.448-1,1v4.942L27.006,60.89  c-0.031,0.283,0.06,0.565,0.249,0.777S27.716,62,28,62h8c0.284,0,0.556-0.121,0.745-0.333s0.28-0.495,0.249-0.777L35,42.942V38  c0-0.552-0.447-1-1-1h-1v-1.999l0.927,0.927c1.429,1.429,3.75,1.427,5.177,0c1.428-1.427,1.428-3.75,0-5.177l-1.927-1.927  l2.349-2.348l1.748,1.748c0.725,0.726,1.735,1.115,2.753,1.068c1.024-0.046,1.989-0.525,2.646-1.313l0.479-0.575  c1.13-1.358,1.13-3.329-0.001-4.687l-0.478-0.573c-0.657-0.789-1.623-1.268-2.647-1.313c-1.019-0.053-2.028,0.343-2.753,1.068  l-1.748,1.748l-2.349-2.349l1.927-1.927c1.428-1.427,1.428-3.75,0-5.177c-1.427-1.427-3.748-1.428-5.177,0l-0.294,0.294l1.979-8.226  c0.307-1.123,0.083-2.301-0.616-3.232C34.281,2.08,33.189,1.534,32,1.534s-2.281,0.546-2.995,1.498  c-0.699,0.932-0.923,2.11-0.624,3.202l1.986,8.256l-0.294-0.294c-1.428-1.428-3.749-1.427-5.177,0c-1.428,1.427-1.428,3.75,0,5.177  l1.927,1.927l-2.349,2.349L22.727,21.9z M21.313,26.81c-0.334,0.334-0.793,0.506-1.248,0.484c-0.473-0.021-0.899-0.233-1.202-0.596  l-0.478-0.573c-0.513-0.616-0.513-1.511-0.001-2.126l0.479-0.574c0.303-0.363,0.729-0.575,1.201-0.596  c0.466-0.017,0.914,0.151,1.248,0.485l1.748,1.748L21.313,26.81z M31,39h2v3h-2V39z M29.117,60l1.778-16h2.209l1.778,16H29.117z   M42.688,23.314c0.333-0.334,0.783-0.5,1.248-0.485c0.473,0.021,0.898,0.233,1.202,0.597l0.478,0.573  c0.513,0.616,0.513,1.511,0.001,2.126l-0.479,0.574c-0.303,0.363-0.729,0.575-1.202,0.596c-0.442,0.022-0.913-0.15-1.248-0.484  l-1.748-1.748L42.688,23.314z M28.659,34.514c-0.648,0.648-1.7,0.647-2.349,0c-0.647-0.647-0.647-1.701,0-2.349l1.927-1.926  l2.349,2.348L28.659,34.514z M32,18.951l2.349,2.349L32,23.647l-2.349-2.348L32,18.951z M34.349,28.824L32,31.173l-2.349-2.349  L32,26.476L34.349,28.824z M37.689,32.165c0.647,0.647,0.647,1.701,0,2.349c-0.649,0.648-1.701,0.647-2.349,0l-1.927-1.927  l2.349-2.348L37.689,32.165z M38.111,25.062l-2.349,2.348l-2.349-2.349l2.349-2.348L38.111,25.062z M35.341,15.61  c0.649-0.648,1.701-0.646,2.349,0c0.647,0.647,0.647,1.701,0,2.349l-1.927,1.927l-2.349-2.349L35.341,15.61z M30.604,4.232  C30.938,3.789,31.445,3.534,32,3.534s1.063,0.254,1.396,0.698c0.325,0.434,0.43,0.982,0.278,1.534L32,12.725l-1.682-6.989  C30.175,5.214,30.279,4.666,30.604,4.232z M26.311,17.958c-0.647-0.647-0.647-1.701,0-2.349c0.324-0.324,0.749-0.485,1.175-0.485  c0.425,0,0.85,0.162,1.174,0.485l1.927,1.927l-2.349,2.349L26.311,17.958z M28.237,22.713l2.349,2.348l-2.349,2.349l-2.349-2.348  L28.237,22.713z"/></svg>
               <span class="Homepage">首页</span> 
            </a>
            <a href="/h5web/MapSelect.html">
                <svg fill="#000000" width="800px" height="800px" viewBox="0 0 64 64" id="Layer_1_1_" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g/><path d="M22.727,21.9c-0.724-0.725-1.728-1.124-2.753-1.068c-1.024,0.046-1.99,0.525-2.646,1.313l-0.479,0.575  c-1.13,1.357-1.13,3.328,0,4.686c0,0,0,0,0.001,0.001l0.479,0.574c0.657,0.788,1.622,1.267,2.646,1.313  c1.026,0.051,2.029-0.343,2.753-1.068l1.748-1.748l2.349,2.348l-1.927,1.927c-1.428,1.427-1.428,3.75,0,5.177  c0.714,0.714,1.65,1.071,2.589,1.07c0.937,0,1.874-0.356,2.588-1.07L31,35.001V37h-1c-0.553,0-1,0.448-1,1v4.942L27.006,60.89  c-0.031,0.283,0.06,0.565,0.249,0.777S27.716,62,28,62h8c0.284,0,0.556-0.121,0.745-0.333s0.28-0.495,0.249-0.777L35,42.942V38  c0-0.552-0.447-1-1-1h-1v-1.999l0.927,0.927c1.429,1.429,3.75,1.427,5.177,0c1.428-1.427,1.428-3.75,0-5.177l-1.927-1.927  l2.349-2.348l1.748,1.748c0.725,0.726,1.735,1.115,2.753,1.068c1.024-0.046,1.989-0.525,2.646-1.313l0.479-0.575  c1.13-1.358,1.13-3.329-0.001-4.687l-0.478-0.573c-0.657-0.789-1.623-1.268-2.647-1.313c-1.019-0.053-2.028,0.343-2.753,1.068  l-1.748,1.748l-2.349-2.349l1.927-1.927c1.428-1.427,1.428-3.75,0-5.177c-1.427-1.427-3.748-1.428-5.177,0l-0.294,0.294l1.979-8.226  c0.307-1.123,0.083-2.301-0.616-3.232C34.281,2.08,33.189,1.534,32,1.534s-2.281,0.546-2.995,1.498  c-0.699,0.932-0.923,2.11-0.624,3.202l1.986,8.256l-0.294-0.294c-1.428-1.428-3.749-1.427-5.177,0c-1.428,1.427-1.428,3.75,0,5.177  l1.927,1.927l-2.349,2.349L22.727,21.9z M21.313,26.81c-0.334,0.334-0.793,0.506-1.248,0.484c-0.473-0.021-0.899-0.233-1.202-0.596  l-0.478-0.573c-0.513-0.616-0.513-1.511-0.001-2.126l0.479-0.574c0.303-0.363,0.729-0.575,1.201-0.596  c0.466-0.017,0.914,0.151,1.248,0.485l1.748,1.748L21.313,26.81z M31,39h2v3h-2V39z M29.117,60l1.778-16h2.209l1.778,16H29.117z   M42.688,23.314c0.333-0.334,0.783-0.5,1.248-0.485c0.473,0.021,0.898,0.233,1.202,0.597l0.478,0.573  c0.513,0.616,0.513,1.511,0.001,2.126l-0.479,0.574c-0.303,0.363-0.729,0.575-1.202,0.596c-0.442,0.022-0.913-0.15-1.248-0.484  l-1.748-1.748L42.688,23.314z M28.659,34.514c-0.648,0.648-1.7,0.647-2.349,0c-0.647-0.647-0.647-1.701,0-2.349l1.927-1.926  l2.349,2.348L28.659,34.514z M32,18.951l2.349,2.349L32,23.647l-2.349-2.348L32,18.951z M34.349,28.824L32,31.173l-2.349-2.349  L32,26.476L34.349,28.824z M37.689,32.165c0.647,0.647,0.647,1.701,0,2.349c-0.649,0.648-1.701,0.647-2.349,0l-1.927-1.927  l2.349-2.348L37.689,32.165z M38.111,25.062l-2.349,2.348l-2.349-2.349l2.349-2.348L38.111,25.062z M35.341,15.61  c0.649-0.648,1.701-0.646,2.349,0c0.647,0.647,0.647,1.701,0,2.349l-1.927,1.927l-2.349-2.349L35.341,15.61z M30.604,4.232  C30.938,3.789,31.445,3.534,32,3.534s1.063,0.254,1.396,0.698c0.325,0.434,0.43,0.982,0.278,1.534L32,12.725l-1.682-6.989  C30.175,5.214,30.279,4.666,30.604,4.232z M26.311,17.958c-0.647-0.647-0.647-1.701,0-2.349c0.324-0.324,0.749-0.485,1.175-0.485  c0.425,0,0.85,0.162,1.174,0.485l1.927,1.927l-2.349,2.349L26.311,17.958z M28.237,22.713l2.349,2.348l-2.349,2.349l-2.349-2.348  L28.237,22.713z"/></svg>
               <span class="Puzzle">游戏<a href=""></a></span> 
            </a>
            <a href="/h5web/Exhibition.html">
                <svg fill="#000000" width="800px" height="800px" viewBox="0 0 64 64" id="Layer_1_1_" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g/><path d="M22.727,21.9c-0.724-0.725-1.728-1.124-2.753-1.068c-1.024,0.046-1.99,0.525-2.646,1.313l-0.479,0.575  c-1.13,1.357-1.13,3.328,0,4.686c0,0,0,0,0.001,0.001l0.479,0.574c0.657,0.788,1.622,1.267,2.646,1.313  c1.026,0.051,2.029-0.343,2.753-1.068l1.748-1.748l2.349,2.348l-1.927,1.927c-1.428,1.427-1.428,3.75,0,5.177  c0.714,0.714,1.65,1.071,2.589,1.07c0.937,0,1.874-0.356,2.588-1.07L31,35.001V37h-1c-0.553,0-1,0.448-1,1v4.942L27.006,60.89  c-0.031,0.283,0.06,0.565,0.249,0.777S27.716,62,28,62h8c0.284,0,0.556-0.121,0.745-0.333s0.28-0.495,0.249-0.777L35,42.942V38  c0-0.552-0.447-1-1-1h-1v-1.999l0.927,0.927c1.429,1.429,3.75,1.427,5.177,0c1.428-1.427,1.428-3.75,0-5.177l-1.927-1.927  l2.349-2.348l1.748,1.748c0.725,0.726,1.735,1.115,2.753,1.068c1.024-0.046,1.989-0.525,2.646-1.313l0.479-0.575  c1.13-1.358,1.13-3.329-0.001-4.687l-0.478-0.573c-0.657-0.789-1.623-1.268-2.647-1.313c-1.019-0.053-2.028,0.343-2.753,1.068  l-1.748,1.748l-2.349-2.349l1.927-1.927c1.428-1.427,1.428-3.75,0-5.177c-1.427-1.427-3.748-1.428-5.177,0l-0.294,0.294l1.979-8.226  c0.307-1.123,0.083-2.301-0.616-3.232C34.281,2.08,33.189,1.534,32,1.534s-2.281,0.546-2.995,1.498  c-0.699,0.932-0.923,2.11-0.624,3.202l1.986,8.256l-0.294-0.294c-1.428-1.428-3.749-1.427-5.177,0c-1.428,1.427-1.428,3.75,0,5.177  l1.927,1.927l-2.349,2.349L22.727,21.9z M21.313,26.81c-0.334,0.334-0.793,0.506-1.248,0.484c-0.473-0.021-0.899-0.233-1.202-0.596  l-0.478-0.573c-0.513-0.616-0.513-1.511-0.001-2.126l0.479-0.574c0.303-0.363,0.729-0.575,1.201-0.596  c0.466-0.017,0.914,0.151,1.248,0.485l1.748,1.748L21.313,26.81z M31,39h2v3h-2V39z M29.117,60l1.778-16h2.209l1.778,16H29.117z   M42.688,23.314c0.333-0.334,0.783-0.5,1.248-0.485c0.473,0.021,0.898,0.233,1.202,0.597l0.478,0.573  c0.513,0.616,0.513,1.511,0.001,2.126l-0.479,0.574c-0.303,0.363-0.729,0.575-1.202,0.596c-0.442,0.022-0.913-0.15-1.248-0.484  l-1.748-1.748L42.688,23.314z M28.659,34.514c-0.648,0.648-1.7,0.647-2.349,0c-0.647-0.647-0.647-1.701,0-2.349l1.927-1.926  l2.349,2.348L28.659,34.514z M32,18.951l2.349,2.349L32,23.647l-2.349-2.348L32,18.951z M34.349,28.824L32,31.173l-2.349-2.349  L32,26.476L34.349,28.824z M37.689,32.165c0.647,0.647,0.647,1.701,0,2.349c-0.649,0.648-1.701,0.647-2.349,0l-1.927-1.927  l2.349-2.348L37.689,32.165z M38.111,25.062l-2.349,2.348l-2.349-2.349l2.349-2.348L38.111,25.062z M35.341,15.61  c0.649-0.648,1.701-0.646,2.349,0c0.647,0.647,0.647,1.701,0,2.349l-1.927,1.927l-2.349-2.349L35.341,15.61z M30.604,4.232  C30.938,3.789,31.445,3.534,32,3.534s1.063,0.254,1.396,0.698c0.325,0.434,0.43,0.982,0.278,1.534L32,12.725l-1.682-6.989  C30.175,5.214,30.279,4.666,30.604,4.232z M26.311,17.958c-0.647-0.647-0.647-1.701,0-2.349c0.324-0.324,0.749-0.485,1.175-0.485  c0.425,0,0.85,0.162,1.174,0.485l1.927,1.927l-2.349,2.349L26.311,17.958z M28.237,22.713l2.349,2.348l-2.349,2.349l-2.349-2.348  L28.237,22.713z"/></svg>
               <span class="Exhibition">展览</span> 
            </a>
        </div>
    </div>

    <div class="game-title">
        <h1>翻牌游戏</h1>
    </div>
    <div class="game-container">

        <div class="game-info-container">


            <div class="game-info">
                时间：<span id="timeRemaining" class="time-remaining">50</span>
            </div>
            <div class="game-info">
                点击：<span id="clickCount" class="click-count">0</span>
            </div>
        </div>


        <div class="card" data-number="3" data-turn="back" onclick="handleClick(this)">
            <div class="card-back card-face">
                <img class="wenwu" src="/翻牌/牌背.png">
            </div>
            <div class="card-front card-face">
                <div data-number="3">
                    <div><img src="./清蝶汶活计.jpg"></div>
                </div>
            </div>
        </div>

        <div class="card" data-number="5" data-turn="back" onclick="handleClick(this)">
            <div class="card-back card-face">
                <img class="wenwu" src="/翻牌/牌背.png">

            </div>
            <div class="card-front card-face">
                <div data-number="5">
                    <div><img src="./清柄团扇.jpg" alt=""></div>
                </div>
            </div>
        </div>

        <div class="card" data-number="5" data-turn="back" onclick="handleClick(this)">
            <div class="card-back card-face">
                <img class="wenwu" src="/翻牌/牌背.png">

            </div>
            <div class="card-front card-face">
                <div data-number="5">
                    <div><img src="./清柄团扇.jpg" alt=""></div>
                </div>
            </div>
        </div>

        <div class="card" data-number="3" data-turn="back" onclick="handleClick(this)">
            <div class="card-back card-face">
                <img class="wenwu" src="/翻牌/牌背.png">
            </div>
            <div class="card-front card-face">
                <div data-number="3">
                    <div><img src="./清蝶汶活计.jpg"></div>
                </div>
            </div>
        </div>

    </div>



    <script>
        let timeRemaining = document.getElementById('timeRemaining')
        let clickCount = document.getElementById('clickCount')
        let time = 50;
        let click = 0;
        let cardsChosen = []
        let cardsHidden = []
        let arr = document.getElementsByClassName('card')
        
        let t = setInterval(() => {
            time--
            timeRemaining.innerText = time

            clickCount.innerText = click
            if (time <= 0) {
                clearInterval(t)
                if (confirm('时间到了，游戏失败')) {
                    window.location.href = '/h5web/MapSelect.html';
                }
            }

        }, 1000)
        function handleClick(o) {

            //翻牌
            reversal(o)
            addCard(o)

            //隔一段时间比较
            setTimeout(() => {
                equals(cardsChosen)
            }, 500)


            clickCount.innerText = click++



        }
        function equals(o) {
            if (o.length >= 2) {
                let one = o[0].getAttribute('data-number')
                let two = o[1].getAttribute('data-number')
                if (one == two) {
                    o[0].style.visibility = 'hidden'
                    o[1].style.visibility = 'hidden'
                    cardsHidden.push(o[0])
                    cardsHidden.push(o[1])
                    if (cardsHidden.length == 4) {
                        alert("恭喜你，游戏胜利！");
                        complete(6);
                        window.location.href = '/h5web/MapSelect.html';
                    }

                }
                else {
                    o[0].setAttribute('data-turn', 'front')
                    o[1].setAttribute('data-turn', 'front')
                    reversal(o[0])
                    reversal(o[1])
                }

            }
            delCard(o)
        }

        function addCard(o) {
            let turn = o.getAttribute('data-turn')
            if (turn == 'front') {
                if (cardsChosen.indexOf(o) == -1)
                    cardsChosen.push(o)
            }


        }
        function delCard(o) {

            if (o.length >= 2) {
                o.splice(0, 2)

            }
        }


        function reversal(o) {
            let turn = o.getAttribute('data-turn')
            if (turn == 'back') {
                o.children[0].style.transform = "rotateY(-180deg)"
                o.children[1].style.transform = "rotateY(0deg)"
                o.setAttribute('data-turn', 'front')

            }
            else {
                o.children[0].style.transform = "rotateY(0deg)"
                o.children[1].style.transform = "rotateY(180deg)"
                o.setAttribute('data-turn', 'back')
            }

        }



        function shuffleElements(elements) {
            for (let i = elements.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [elements[i].style.position, elements[j].style.position] = [elements[j].style.position, elements[i].style.position];
            }
            return elements;

        }


        function suiji() {
            let arr2 = [];
            for (let i = 0; i < this.len - 1; i++) {
                arr2.push(arr[i]);
            }
            arr = shuffleElements(arr2);

            arr.forEach(card => {
                gameContainer.appendChild(card);
            });
            cardsChosen = [];
            cardsHidden = [];
            click = 0;
            time = 50;
            clearInterval(t);
            t = setInterval(() => {
                time--;
                timeRemaining.innerText = time;
                clickCount.innerText = click;
                if (time <= 0) {
                    clearInterval(t);
                    if (confirm('时间到了，游戏失败')) {
                        window.location.href = '/h5web/MapSelect.html';
                    }
                }
            }, 1000);

            // 重置所有卡片到背面朝上状态
            arr.forEach(card => {
                card.setAttribute('data-turn', 'back');
                card.children[0].style.transform = "rotateY(0deg)";
                card.children[1].style.transform = "rotateY(180deg)";
                card.style.backfaceVisibility = "hidden";
            });
        }
    </script>
    <script src="../game.js"></script>
</body>
</html>